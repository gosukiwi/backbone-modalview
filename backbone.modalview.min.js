!function(t,o,e,n){"use strict";"function"==typeof define&&define.amd?define(["backbone","underscore","jquery"],function(t,i,a){t.ModalView=o(t,i,a),t.ModalConfirmView=e(t,i,a),t.ModalPromptView=n(t,i,a)}):(t.Backbone.ModalView=o(t.Backbone,t._,t.jQuery||t.Zepto||t.ender||t.$),t.Backbone.ModalConfirmView=e(t.Backbone,t._,t.jQuery||t.Zepto||t.ender||t.$),t.Backbone.ModalPromptView=n(t.Backbone,t._,t.jQuery||t.Zepto||t.ender||t.$))}(this,function(t,o,e){"use strict";function n(){this.$overlay=e('<div class="backbone-modal-overlay"></div>'),this.$modal=e('<div class="backbone-modal-container"></div>'),this.$modalHeader=e('<h1 class="backbone-modal-header" />'),this.$modalContent=e('<div class="backbone-modal-content" />'),this.$modalFooter=e('<div class="backbone-modal-footer" />'),this.$modal.append(this.$modalHeader).append(this.$modalContent).append(this.$modalFooter),this.$overlay.append(this.$modal),e("body").append(this.$overlay),this.$overlay.click(function(){i.trigger("hidemodal")}),this.$modal.click(function(t){t.stopPropagation()})}var i=o.extend({},t.Events),a=t.View.extend({initialize:function(t){t=t||{};var e=this;if(Object.keys(t).forEach(function(o){["modalHeader","modalContent","modalFooter"].indexOf(o)>-1&&(e[o]=t[o])}),this.modalHeader){var a=this.modalHeader;this.modalHeader=function(t){return t&&t!==a?(a=t,e.trigger("modal:headerchanged",a),e):a}}if(this.modalContent){var r=this.modalContent;this.modalContent=function(t){return t&&t!==r?(r=t,e.trigger("modal:contentchanged",r),e):r}}if(this.modalFooter){var d=this.modalFooter;this.modalFooter=function(t){return t&&t!==d?(d=t,e.trigger("modal:footerchanged",d),e):d}}i.on("hidemodal",function(){e.hide()}),this.on("modal:headerchanged",this.drawHeader),this.on("modal:contentchanged",this.drawContent),this.on("modal:footerchanged",this.drawFooter),this.markup=new n,this.$el=this.markup.$modal,o.isFunction(t.onShow)&&this.on("modal:show",t.onShow),o.isFunction(t.onHide)&&this.on("modal:hide",t.onHide),this.render()},render:function(){this.modalHeader&&this.drawHeader(this.modalHeader()),this.modalContent&&this.drawContent(this.modalContent()),this.modalFooter&&this.drawFooter(this.modalFooter())},drawHeader:function(t){this.markup.$modalHeader.text(t)},drawContent:function(t){this.markup.$modalContent.html(t)},drawFooter:function(t){this.markup.$modalFooter.html(t)},hide:function(){this.markup.$overlay.hide(),this.trigger("modal:hide")},show:function(){var t=this.markup.$modal;t.css({marginTop:-(t.outerHeight()+200)}),this.markup.$overlay.show(),t.animate({marginTop:"30vh"}),this.trigger("modal:show")}});return a},function(t,o){"use strict";var e=t.ModalView.extend({initialize:function(e){t.ModalView.prototype.initialize.apply(this,arguments),o.isArray(e.buttons)||(e.buttons=["OK","Cancel"]),this.buttons=e.buttons;var n="";e.buttons.forEach(function(t){n+='<a href="javascript://" class="modal-button" data-name="'+t+'">'+t+"</a>"}),this.modalFooter=n,this.drawFooter(this.modalFooter),e.onButtonPressed&&this.on("button-press",e.onButtonPressed)},buttons:["OK","Cancel"],events:{"click .modal-button":function(t){this.trigger("button-press",$(t.currentTarget))}}});return e},function(t,o){"use strict";var e=t.ModalView.extend({initialize:function(e){t.ModalConfirmView.prototype.initialize.call(this,e),this.btnOK=this.buttons[0],this.btnCancel=this.buttons[1],this.on("confirmed",function(){o.isFunction(this.cb)&&this.cb(),this.hide()}),this.on("canceled",function(){o.isFunction(this.cb)&&this.cb(1),this.hide()})},prompt:function(t){this.cb=t,this.show()},events:{"click .modal-button":function(t){var o=$(t.currentTarget);this.trigger("button-press",o),o.data("name")===this.btnOK?this.trigger("confirmed"):o.data("name")===this.btnCancel&&this.trigger("canceled")}}});return e});