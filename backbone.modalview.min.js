!function(t,o,e,i){"use strict";"function"==typeof define&&define.amd?define(["backbone","underscore","jquery"],function(t,n,a){t.ModalView=o(t,n,a),t.ModalConfirmView=e(t,n,a),t.ModalPromptView=i(t,n,a)}):(t.Backbone.ModalView=o(t.Backbone,t._,t.jQuery||t.Zepto||t.ender||t.$),t.Backbone.ModalConfirmView=e(t.Backbone,t._,t.jQuery||t.Zepto||t.ender||t.$),t.Backbone.ModalPromptView=i(t.Backbone,t._,t.jQuery||t.Zepto||t.ender||t.$))}(this,function(t,o,e){"use strict";function i(){this.$overlay=e('<div class="backbone-modal-overlay"></div>'),this.$modal=e('<div class="backbone-modal-container"></div>'),this.$modalHeader=e('<h1 class="backbone-modal-header" />'),this.$modalContent=e('<div class="backbone-modal-content" />'),this.$modalFooter=e('<div class="backbone-modal-footer" />'),this.$modal.append(this.$modalHeader).append(this.$modalContent).append(this.$modalFooter),this.$overlay.append(this.$modal),e("body").append(this.$overlay),this.$overlay.click(function(){n.trigger("hidemodal")}),this.$modal.click(function(t){t.stopPropagation()})}var n=o.extend({},t.Events),a=t.View.extend({initialize:function(e){t.View.prototype.initialize.apply(this,arguments);var a=this;e=e||{},e.modalHeader&&(this.header=function(t){return t?(e.modalHeader=t,void a.trigger("modal:headerchanged",t)):e.modalHeader}),e.modalContent&&(this.content=function(t){return t?(e.modalContent=t,void a.trigger("modal:contentchanged",t)):e.modalContent}),e.modalFooter&&(this.footer=function(t){return t?(e.modalFooter=t,void a.trigger("modal:footerchanged",t)):e.modalFooter}),n.on("hidemodal",function(){a.hide()}),this.on("modal:headerchanged",this.drawHeader),this.on("modal:contentchanged",this.drawContent),this.on("modal:footerchanged",this.drawFooter),this.markup=new i,this.$el=this.markup.$modal,o.isFunction(e.onShow)&&this.on("modal:show",e.onShow),o.isFunction(e.onHide)&&this.on("modal:hide",e.onHide),this.render()},render:function(){this.header&&this.drawHeader(this.header()),this.content&&this.drawContent(this.content()),this.footer&&this.drawFooter(this.footer())},drawHeader:function(t){this.markup.$modalHeader.text(t)},drawContent:function(t){this.markup.$modalContent.html(t)},drawFooter:function(t){this.markup.$modalFooter.html(t)},hide:function(){this.markup.$overlay.hide(),this.trigger("modal:hide")},show:function(){if(this.markup.$overlay.is(":visible"))throw"Modal is already beeing displayed.";var t=this.markup.$modal;t.css({marginTop:-(t.outerHeight()+200)}),this.markup.$overlay.show(),t.animate({marginTop:"30vh"}),this.trigger("modal:show")}});return a},function(t,o){"use strict";var e=t.ModalView.extend({initialize:function(e){t.ModalView.prototype.initialize.apply(this,arguments),o.isArray(e.buttons)||(e.buttons=["OK","Cancel"]),this.buttons=e.buttons;var i="";e.buttons.forEach(function(t){i+='<a href="javascript://" class="modal-button" data-name="'+t+'">'+t+"</a>"}),this.modalFooter=i,this.drawFooter(this.modalFooter),e.onButtonPressed&&this.on("button-press",e.onButtonPressed)},buttons:["OK","Cancel"],events:{"click .modal-button":function(t){this.trigger("button-press",$(t.currentTarget))}}});return e},function(t,o){"use strict";var e=t.ModalView.extend({initialize:function(e){t.ModalConfirmView.prototype.initialize.call(this,e),this.btnOK=this.buttons[0],this.btnCancel=this.buttons[1],this.on("confirmed",function(){o.isFunction(this.cb)&&this.cb(),this.hide()}),this.on("canceled",function(){o.isFunction(this.cb)&&this.cb(1),this.hide()})},prompt:function(t){this.show(),this.cb=t},events:{"click .modal-button":function(t){var o=$(t.currentTarget);this.trigger("button-press",o),o.data("name")===this.btnOK?this.trigger("confirmed"):o.data("name")===this.btnCancel&&this.trigger("canceled")}}});return e});