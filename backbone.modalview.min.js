!function(t,o,e){"use strict";"function"==typeof define&&define.amd?define(["backbone","underscore","jquery"],function(t,a,n){t.ModalView=o(t,a,n),t.ModalConfirmView=e(t,a,n)}):(t.Backbone.ModalView=o(t.Backbone,t._,t.jQuery||t.Zepto||t.ender||t.$),t.Backbone.ModalConfirmView=e(t.Backbone,t._,t.jQuery||t.Zepto||t.ender||t.$))}(this,function(t,o,e){"use strict";function a(){this.$overlay=e('<div class="backbone-modal-overlay"></div>'),this.$modal=e('<div class="backbone-modal-container"></div>'),this.$modalHeader=e('<h1 class="backbone-modal-header" />'),this.$modalContent=e('<div class="backbone-modal-content" />'),this.$modalFooter=e('<div class="backbone-modal-footer" />'),this.$modal.append(this.$modalHeader).append(this.$modalContent).append(this.$modalFooter),this.$overlay.append(this.$modal),e("body").append(this.$overlay),this.$overlay.click(function(){n.trigger("hidemodal")}),this.$modal.click(function(t){t.stopPropagation()})}var n=o.extend({},t.Events),i=t.View.extend({initialize:function(t){var e=this;if(Object.keys(t).forEach(function(o){["modalHeader","modalContent","modalFooter"].indexOf(o)>-1&&(e[o]=t[o])}),this.modalHeader){var i=this.modalHeader;this.modalHeader=function(t){return t&&t!==i?(i=t,e.trigger("modal:headerchanged",i),e):i}}if(this.modalContent){var d=this.modalContent;this.modalContent=function(t){return t&&t!==d?(d=t,e.trigger("modal:contentchanged",d),e):d}}if(this.modalFooter){var r=this.modalFooter;this.modalFooter=function(t){return t&&t!==r?(r=t,e.trigger("modal:footerchanged",r),e):r}}n.on("hidemodal",function(){e.hide()}),this.on("modal:headerchanged",this.drawHeader),this.on("modal:contentchanged",this.drawContent),this.on("modal:footerchanged",this.drawFooter),this.markup=new a,this.$el=this.markup.$modal,o.isFunction(t.onShow)&&this.on("modal:show",t.onShow),o.isFunction(t.onHide)&&this.on("modal:hide",t.onHide),this.render()},render:function(){this.modalHeader&&this.drawHeader(this.modalHeader()),this.modalContent&&this.drawContent(this.modalContent()),this.modalFooter&&this.drawFooter(this.modalFooter())},drawHeader:function(t){this.markup.$modalHeader.text(t)},drawContent:function(t){this.markup.$modalContent.html(t)},drawFooter:function(t){this.markup.$modalFooter.html(t)},hide:function(){this.markup.$overlay.hide(),this.trigger("modal:hide")},show:function(){var t=this.markup.$modal;t.css({marginTop:-(t.outerHeight()+200)}),this.markup.$overlay.show(),t.animate({marginTop:"30vh"}),this.trigger("modal:show")}});return i},function(t,o){"use strict";var e=t.ModalView.extend({initialize:function(e){t.ModalView.prototype.initialize.apply(this,arguments);var a="";this.buttons.forEach(function(t){a+='<a href="javascript://" class="modal-button" data-name="'+t+'">'+t+"</a>"}),this.modalFooter=a,this.drawFooter(this.modalFooter),e.onButtonPressed&&this.on("button-press",e.onButtonPressed),o.isArray(e.buttons)&&(this.buttons=e.buttons)},buttons:["OK","Cancel"],events:{"click .modal-button":function(t){this.trigger("button-press",$(t.currentTarget))}}});return e});